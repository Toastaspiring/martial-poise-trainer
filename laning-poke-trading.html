<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laning Poke Trading</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-image: url('backgroundimage.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Inter', sans-serif;
        }

        /* Greyish Liquid Glass Effect */
        .glass-widget {
            background: rgba(30, 41, 59, 0.4);
            /* Darker, greyish tint */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 16px;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            /* Darker for menus */
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .glass-button {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
        }

        .glass-button:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body class="text-slate-300 overflow-hidden select-none">

    <!-- Top Bar Widgets Container -->
    <div class="absolute top-0 left-0 w-full px-8 py-6 flex items-start justify-between z-50 pointer-events-none">

        <!-- Left Widget Group: Back Button & Stats -->
        <div class="flex items-center gap-4 pointer-events-auto">
            <a href="index.html"
                class="glass-widget flex items-center gap-2 px-4 py-3 text-slate-300 hover:text-white transition-colors group">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="group-hover:-translate-x-1 transition-transform">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                <span class="font-medium text-sm">Back</span>
            </a>

            <!-- Stats Widget -->
            <div class="glass-widget px-6 py-3 flex items-center gap-6">
                <div class="flex flex-col items-center min-w-[60px]" title="Damage Per Second">
                    <span class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-0.5">DPS</span>
                    <span class="text-emerald-400 font-mono font-bold text-lg leading-none" id="dps">0</span>
                </div>
                <div class="w-px h-8 bg-white/5"></div>
                <div class="flex flex-col items-center min-w-[60px]" title="Successful Dashes">
                    <span class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-0.5">Dashes</span>
                    <span class="text-blue-400 font-mono font-bold text-lg leading-none" id="score">0</span>
                </div>
                <div class="w-px h-8 bg-white/5"></div>
                <div class="flex flex-col items-center min-w-[60px]" title="Missed Rhythm">
                    <span class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-0.5">Misses</span>
                    <span class="text-red-400 font-mono font-bold text-lg leading-none" id="misses">0</span>
                </div>
                <div class="w-px h-8 bg-white/5 hidden sm:block"></div>
                <div class="hidden sm:flex flex-col items-center min-w-[60px]" title="Total Damage">
                    <span class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-0.5">DMG</span>
                    <span class="text-slate-400 font-mono font-bold text-lg leading-none" id="totalDamage">0</span>
                </div>
            </div>
        </div>

        <!-- Right Widget Group -->
        <div class="flex items-center gap-3 pointer-events-auto">
            <!-- Chase Toggle -->
            <div class="glass-widget px-4 py-3 flex items-center gap-3 cursor-pointer hover:bg-white/5 transition-colors"
                id="chaseToggleContainer" title="Toggle Chase Mode (F6)">
                <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Start Kiting</span>
                <button id="chaseToggleSwitch"
                    class="w-10 h-5 bg-slate-700/50 rounded-full relative transition-colors duration-200 border border-white/10 focus:outline-none">
                    <div id="chaseToggleKnob"
                        class="w-3 h-3 bg-slate-400 rounded-full absolute top-[3px] left-[3px] transition-transform duration-200 shadow-sm">
                    </div>
                </button>
            </div>

            <!-- Settings Button -->
            <button id="toggleMenuBtn"
                class="glass-widget p-3 text-slate-400 hover:text-white transition-colors flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                    </path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Advanced Menu -->
    <div class="advanced-menu fixed top-24 right-8 w-80 glass-panel rounded-2xl p-6 transform translate-x-[120%] transition-transform duration-300 z-40"
        id="advancedMenu">
        <!-- Stats Config -->
        <div class="menu-section mb-6">
            <div class="flex justify-between items-center mb-4">
                <span class="text-slate-200 font-bold text-sm uppercase tracking-wider">Player Stats</span>
                <span id="windupDisplay"
                    class="text-orange-300/80 font-mono text-[10px] bg-orange-500/10 px-2 py-1 rounded border border-orange-500/20">0.519s
                    Windup</span>
            </div>
            <div class="mb-5">
                <div class="flex justify-between items-end mb-2">
                    <label class="text-xs text-slate-400 font-medium">Attack Speed</label>
                    <span id="asDisplay" class="text-emerald-400/90 font-bold text-sm font-mono">0.694</span>
                </div>
                <input type="range" id="asSlider" min="0.694" max="2.5" step="0.01" value="0.694"
                    class="w-full accent-emerald-500/80 h-1.5 bg-slate-700/50 rounded-lg appearance-none cursor-pointer">
            </div>
            <div class="mb-4">
                <label class="text-xs text-slate-400 block mb-2 font-medium">Boots (Speed & Range)</label>
                <select id="bootsSelect"
                    class="w-full bg-slate-800/50 border border-white/5 rounded-lg text-sm text-slate-300 p-2.5 focus:border-emerald-500/50 outline-none backdrop-blur-sm">
                    <option value="0" class="bg-slate-900">No Boots (Tier 0)</option>
                    <option value="1" class="bg-slate-900">Boots of Speed (Tier 1)</option>
                    <option value="2" selected class="bg-slate-900">Berserker's (Tier 2)</option>
                </select>
                <div class="text-[10px] text-slate-500 mt-2 font-mono" id="dashRangeText">
                    Range: 280 (Back) / 180 (Fwd)
                </div>
            </div>
        </div>

        <!-- Enemy Config -->
        <div class="menu-section mb-6 pt-6 border-t border-white/5">
            <span class="text-red-300/80 font-bold text-sm mb-4 block uppercase tracking-wider">Enemy Config</span>
            <div class="mb-4">
                <div class="flex justify-between items-end mb-2">
                    <label class="text-xs text-slate-400 font-medium">Movement Speed</label>
                    <span id="chaseSpeedDisplay"
                        class="text-slate-300 font-bold text-xs font-mono bg-white/5 px-1.5 py-0.5 rounded">340</span>
                </div>
                <input type="range" id="chaseSpeedSlider" min="200" max="550" step="5" value="340"
                    class="w-full accent-red-400/80 h-1.5 bg-slate-700/50 rounded-lg appearance-none cursor-pointer">
            </div>
            <div class="mb-4">
                <div class="flex justify-between items-end mb-2">
                    <label class="text-xs text-slate-400 font-medium">Attack Damage</label>
                    <span id="enemyAdDisplay"
                        class="text-slate-300 font-bold text-xs font-mono bg-white/5 px-1.5 py-0.5 rounded">60</span>
                </div>
                <input type="range" id="enemyAdSlider" min="10" max="200" step="5" value="60"
                    class="w-full accent-red-400/80 h-1.5 bg-slate-700/50 rounded-lg appearance-none cursor-pointer">
            </div>
            <div class="mb-2">
                <div class="flex justify-between items-end mb-2">
                    <label class="text-xs text-slate-400 font-medium">Attack Range</label>
                    <span id="enemyRangeDisplay"
                        class="text-slate-300 font-bold text-xs font-mono bg-white/5 px-1.5 py-0.5 rounded">150</span>
                </div>
                <input type="range" id="enemyRangeSlider" min="50" max="400" step="10" value="150"
                    class="w-full accent-red-400/80 h-1.5 bg-slate-700/50 rounded-lg appearance-none cursor-pointer">
            </div>
        </div>

        <!-- Controls Reference -->
        <div class="menu-section pt-6 border-t border-white/5">
            <span class="text-blue-300/80 font-bold text-sm mb-4 block uppercase tracking-wider">Controls & Binds</span>
            <div class="text-xs text-slate-400 space-y-3">
                <div class="flex justify-between items-center">
                    <span>Attack Move</span>
                    <div class="flex items-center gap-1">
                        <span
                            class="bg-white/5 px-2 py-1 rounded border border-white/10 text-slate-300 font-mono cursor-pointer hover:bg-white/10 transition-colors"
                            id="badgeAmKey" title="Click to Rebind">Q</span>
                        <span class="text-slate-600">+</span>
                        <span
                            class="bg-white/5 px-2 py-1 rounded border border-white/10 text-slate-300 font-mono">LMB</span>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span>Stop Command</span>
                    <span
                        class="bg-white/5 px-2 py-1 rounded border border-white/10 text-slate-300 font-mono cursor-pointer hover:bg-white/10 transition-colors"
                        id="badgeStopKey" title="Click to Rebind">S</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>Reset Run</span>
                    <span
                        class="bg-white/5 px-2 py-1 rounded border border-white/10 text-slate-300 font-mono cursor-pointer hover:bg-white/10 transition-colors"
                        id="badgeResetKey" title="Click to Rebind">R</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>Movement / Dash</span>
                    <span
                        class="bg-white/5 px-2 py-1 rounded border border-white/10 text-slate-300 font-mono cursor-pointer hover:bg-white/10 transition-colors"
                        id="badgeMoveBtn" title="Click to Toggle Mouse Button">RMB</span>
                </div>
                <div class="flex justify-between items-center pt-3 mt-2 border-t border-white/5">
                    <span>LMB Attack Move</span>
                    <div class="flex items-center gap-2 cursor-pointer" id="lmbAmToggleContainer"
                        title="Toggle Left Click Attack Move">
                        <button id="lmbAmSwitch"
                            class="w-8 h-4 bg-slate-700/50 rounded-full relative transition-colors duration-200 border border-white/10 focus:outline-none"
                            aria-pressed="false">
                            <div id="lmbAmKnob"
                                class="w-2 h-2 bg-slate-400 rounded-full absolute top-[3px] left-[3px] transition-transform duration-200 shadow-sm">
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <button id="resetBtn"
            class="glass-button w-full py-2.5 rounded-lg text-sm font-bold text-slate-300 mt-6 hover:text-white hover:bg-white/5 border-white/10">Reset
            Position</button>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboardingModal" class="modal-overlay p-4">
        <div class="glass-panel rounded-[24px] p-10 max-w-md w-full relative overflow-hidden border-white/10">
            <!-- Subtle Glow -->
            <div
                class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-emerald-500/10 blur-[50px] rounded-full pointer-events-none">
            </div>

            <div class="text-center mb-10 relative z-10">
                <h2 class="text-slate-100 font-bold text-3xl mb-2 tracking-tight">Laning Poke Trading</h2>
                <p class="text-emerald-500/80 text-xs uppercase tracking-[0.2em] font-bold">Laning & Trading Trainer</p>
                <p class="text-slate-500 text-[10px] mt-3 italic">Made by ToastyDev</p>
            </div>

            <ul class="space-y-3 mb-10 text-sm text-slate-300 relative z-10">
                <li class="flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5">
                    <span class="font-medium text-slate-400">Attack Move</span>
                    <span
                        class="bg-white/5 px-2.5 py-1 rounded-md text-slate-200 font-mono text-xs border border-white/10">Q</span>
                </li>
                <li class="flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5">
                    <span class="font-medium text-slate-400">Move / Dash</span>
                    <span
                        class="bg-white/5 px-2.5 py-1 rounded-md text-slate-200 font-mono text-xs border border-white/10">RMB</span>
                </li>
                <li class="flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5">
                    <span class="font-medium text-slate-400">Stop</span>
                    <span
                        class="bg-white/5 px-2.5 py-1 rounded-md text-slate-200 font-mono text-xs border border-white/10">S</span>
                </li>
            </ul>

            <div class="bg-emerald-900/10 p-5 rounded-xl border border-emerald-500/10 mb-8 relative z-10">
                <h3 class="text-emerald-400/90 font-bold mb-3 text-sm flex items-center gap-2 uppercase tracking-wide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="22" y1="12" x2="18" y2="12"></line>
                        <line x1="6" y1="12" x2="2" y2="12"></line>
                        <line x1="12" y1="6" x2="12" y2="2"></line>
                        <line x1="12" y1="22" x2="12" y2="18"></line>
                    </svg>
                    Objective
                </h3>
                <p class="text-emerald-200/60 text-xs leading-relaxed">
                    Attack the target to build DPS.
                    Input a <span class="text-emerald-300 font-bold">Movement Command</span> during the windup animation
                    to <span class="text-emerald-300 font-bold">Dash</span>.
                </p>
            </div>

            <button id="startTrainingBtn"
                class="w-full py-4 rounded-xl font-bold text-sm uppercase tracking-widest transition-all relative z-10 bg-emerald-500/20 border border-emerald-500/50 text-emerald-100 hover:bg-emerald-500/30 hover:border-emerald-400 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] hover:-translate-y-0.5">
                Start Training
            </button>
        </div>
    </div>

    <div
        class="watermark fixed bottom-6 right-6 text-slate-600/50 text-xs font-bold select-none pointer-events-none z-10 tracking-widest">
        TOASTYDEV</div>
    <!-- Main Game Frame -->
    <div
        class="absolute top-24 bottom-8 left-8 right-8 glass-panel rounded-[30px] overflow-hidden border border-white/10 shadow-2xl z-0">
        <canvas id="gameCanvas" class="block w-full h-full"></canvas>
    </div>

    <script type="module" src="js/laning-app.js"></script>
</body>

</html>